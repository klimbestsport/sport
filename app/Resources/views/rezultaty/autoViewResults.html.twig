<head>
    <link href="{{ asset('bundles/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet"/>
    <link rel="stylesheet" href="{{ asset('bundles/css/font-awesome/css/font-awesome.min.css') }}" >
    <link rel="stylesheet" href="{{ asset('bundles/css/css.css') }}" >
    <script src="{{ asset('bundles/js/js.js') }}" type="text/javascript" /></script>
<link rel="stylesheet" href="{{ asset('bundles/jquery/jquery.min.js') }}" >
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src='https://www.google.com/recaptcha/api.js'></script>
</head>
{% block body %}
    <div>{#{% for competition in konkurencja %} 
        <h1> trgd{{competition}}</h1>{% endfor %}#}


    </div>
    <div id="container">

        <div id="wykaz"> <button id="pobierz"  typ="submit">KlikNext</button>
            <table class="sortable table table-striped">
                <thead>
                    <tr>
                        <th>Imię</th>
                        <th>Nazwisko</th>
                        <th>Rok urodzenia</th>
                        <th>Nr licencji</th>
                        <th>Klub</th>
                        <th th style="border-left:2px solid white">Seria I <br>Rezultat</th>
                        <th style="border-right:2px solid white">X </th>
                        <th>Seria II <br> Rezultat</th>
                        <th style="border-right:2px solid white">X</th>
                        <th>Czas</th>
                        <th>Factor2</th>
                        <th>Konkurencja</th>
                        <th>Suma rez</th>     
                        <th>Suma X</th>
                    </tr>
                </thead>
                <tbody>
                    {% for rez in rezultaty %}
                        <tr>
                            <td><a href="{{ path('rezultaty_show', { 'id': rez.id }) }}">{{ rez.imie }}</a></td>
                            <td>{{ rez.nazwisko }}</td>
                            <td>{{ rez.rokU }}</td>
                            <td>{{ rez.nrLic }}</td>
                            <td style="border-right:2px solid white">{{ rez.klub }}</td>
                            <td style="border-right:1px solid white">{{ rez.rezultatS1 }}</td>
                            <td style="border-right:2px solid white">{{ rez.xS1 }}</td>
                            <td style="border-right:1px solid white">{{ rez.rezultatS2 }}</td>
                            <td style="border-right:2px solid white">{{ rez.xS2 }}</td>
                             <td>{{ rez.czas }}</td>
                            <td>{{ rez.factor2 }}</td>
                            <td>{{ rez.nazwaP }}</td>
                            
                    <td style="background:#c3a5a5">{{ rez.sumaRez }}</td>
                    <td style="background:#bcbfb6">{{ rez.sumaX }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <input type="hidden" value="data21" id="data1" name="data1"/>
        </div>
    </div>
    <style>
table.sortable thead {
            color: #622925e6;
            font-weight: bold;
            cursor: default;
        }
        h1{
            font-size: 2.5rem;
            padding-bottom: 30px;
        }
        a{
            color: #622925e6;

        }
        a:hover{
            text-decoration:none;
        }
        thead{
            background:silver;
        }
        tbody{

            background:#f0eded;
        }
        td{
            border-bottom: 0.7px solid white;
        }
    </style>

    <script>
        function autoLoaderCompetition() {
            $.post('{{path('auto_view_results')}}',
                    {data1: 'data1'},
                    function (json) {
                        //  for (var klucz in json)
                        //    {
        {#var wiersz = json[klucz]; 
        var id = wiersz[1];
        var nazwisko = wiersz[1];
         #}
                             $('#wykaz').empty()
                             setTimeout("autoLoaderCompetition()", 15000);
                             $("<span>" + json + "</span>")
                                     .appendTo('#wykaz')
                                     .append("<hr>")
                             //  } 

                         });

             }

        {#
         $('#pobierz').click(function() {
         var path = {{ path('take_next_competition') }};
            $.ajax({
                type:"GET", 
                url:path,
                contentType:"application/json; charset=utf-8", /*Informacja o formacie transferu danych*/
                dataType:'json', /*Informacja o formacie transferu danych*/
                 #}
        {#    success: function(json) { 
                for (var klucz in json)
                    {
                        var wiersz = json[klucz]; 
                        var id = wiersz[0];
                        var nazwisko = wiersz[1];
                             
                        /*Ustalenie sposobu wyświetlania pobranych danych w bloku div*/
                        $("<span>id: "+id+" nazwa: "+nazwisko+"</span>")
                        .appendTo('#wykaz')
                        .append("<hr>")
                    } 
                     
                     
                /*Dezaktywacja na określony czas przycisku wysyłającego - ten krok można pomninąć*/
                $("#pobierz").attr("disabled", true);
                setTimeout(function(){
                    $("#pobierz").attr("disabled", false); 
                }, 10000);  
                 
            },
                 
                 
            /*Działania wykonywane w przypadku błędu*/
            error: function(blad) {
                alert( "Wystąpił błąd");
                console.log(blad); /*Funkcja wyświetlająca informacje 
                o ewentualnym błędzie w konsoli przeglądarki*/
            }#}
        {#       
          });
     
      });#}
          $(document).ready(function () {
              $('button').on('click', function () {
                  autoLoaderCompetition();
              });
          });
    </script>
{% endblock %}
