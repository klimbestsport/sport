<head>
    <link href="{{ asset('bundles/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet"/>
    <link rel="stylesheet" href="{{ asset('bundles/css/font-awesome/css/font-awesome.min.css') }}" >
    <link rel="stylesheet" href="{{ asset('bundles/css/css.css') }}" >
    <script src="{{ asset('bundles/js/js.js') }}" type="text/javascript" /></script>
<link rel="stylesheet" href="{{ asset('bundles/jquery/jquery.min.js') }}" >
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src='https://www.google.com/recaptcha/api.js'></script>
</head>
<body onLoad="autoLoaderCompetition()">
    <div id="container">

        <div id="wykaz"> {% if (konkurencja is defined and konkurencja) %}   

            <div style="float:right" >
                {% if (actualResult and (ilosc-1)>=(actualResult+5))  %}  
                    Wyniki: {{actualResult+5 }}/<strong>{{ilosc-1}}</strong>
                {%elseif (actualResult<5) %}
                    Wyniki: {{ilosc-1}}/<strong>{{ilosc-1}}</strong>
               {% elseif (actualResult and (ilosc-1)>=(actualResult+5))  %}  
                {%endif%}
                <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>
                <span class="sr-only">Loading...</span></div>


            <h1 style="border-bottom: 0.4px solid red; padding-bottom:20px;"> {{konkurencja}}</h1>{% endif %}
            <div class="table-responsive">
                <table class="table table-striped" id='tabliczka'>
                    <thead>
                        <tr>

                            <th style="width:3%">Nr</th>
                                {#<th id="thnr">Nr</th>#}
                            <th style="width:10%">Imię</th>
                            <th style="width:10%">Nazwisko</th>

                            <th style="width:7%">Nr licencji</th>
                            <th style="width:10%">Klub</th>

                            <th style="border-left:2px solid white">Seria I <br>Rezultat</th>
                            <th style="border-right:2px solid white">X </th>
                            <th>Seria II <br> Rezultat</th>
                            <th style="border-right:2px solid white">X</th>
                            <th>Czas</th>
                            <th>Factor</th>
                            <th>Suma rez</th>     
                            <th>Suma X</th>

                        </tr>
                    </thead>
                    <tbody>  {# {% if (actualResult-5>=5)  %}  #}


                        {#
                        {{actualResult+5 }} 
                            wyników z <strong>{{ilosc}}</strong>{% else %}{{actualResult==0}}% endif %}  {#}
                        {% for rez in rezultaty %}
                            <tr>
                                <td> {{ loop.index+actualResult }}</td>
                                <td><a href="{{ path('rezultaty_show', { 'id': rez.id }) }}">{{ rez.imie }}</a></td>
                                <td>{{ rez.nazwisko }}</td>

                                <td>{{ rez.nrLic }}</td>
                                <td style="border-right:2px solid white">{{ rez.klub }}</td>


                                <td style="border-right:1px solid white">{{ rez.rezultatS1 }}</td>
                                <td style="border-right:2px solid white">{{ rez.xS1 }}</td>
                                <td style="border-right:1px solid white">{{ rez.rezultatS2 }}</td>
                                <td style="border-right:2px solid white">{{ rez.xS2 }}</td>
                                <td>{{ rez.czas }}</td>
                                <td>{{ rez.factor2 }}</td>
                                <td style="background:#c3a5a5">{{ rez.sumaRez }}</td>
                                <td style="background:#bcbfb6">{{ rez.sumaX }}</td>

                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <input type="hidden" value="data21" id="data1" name="data1"/>
            <input type="hidden" value="competitionId" id="competitionId" name="competitionId"/>

        </div>
    </div>
</body>
<style>

    h1{
        font-size: 2.5rem;
        padding-bottom: 30px;
    }
    a{
        color: #622925e6;

    }
    a:hover{
        text-decoration:none;
    }
    thead{
        background:silver;
    }
    table{
        font-size:middle;
    }
    tbody{

        background:#f0eded;
    }
    td{
        border-bottom: 0.7px solid white;
    }
    th{
    }
</style>
<script>

    {# function tdNr() {

         var tables = document.getElementsByTagName('tbody');
         var table = tables[tables.length - 1];
        var rows = table.rows;
         for (var i = 0, td; i < rows.length; i++) {
            td = document.createElement('td');

             td.appendChild(document.createTextNode(i + 1));

             rows[i].insertBefore(td, rows[i].firstChild);
         }
 #}

     function autoLoaderCompetition() {
         var timeSec = 1000;

         $.post('{{path('auto_view_results')}}',
                 {data1:{{actualResult}}, competitionId:{{competitionId}}},
                 function (json) {

                     $('#wykaz').empty()
                     setTimeout("autoLoaderCompetition()", timeSec);
    {#   $("td").remove("#tdnr")      
       $("th").remove("#nr") #}  
                     $("<span>" + json + "</span>")
                             .appendTo('#wykaz')
                             .append("<hr>")
                 }
         );
     }





</script>
